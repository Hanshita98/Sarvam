<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Products | Sarvam Gruh Udhoyog</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- HEADER -->
<header class="header">
  <a href="index.html" class="logo">
    <img src="images/logo.png" class="logo-img">
    <div class="logo-text">
      <h3>SARVAM</h3>
      <p>Gruh Udhoyog</p>
    </div>
  </a>

  <nav class="nav-menu">
    <a href="index.html">Home</a>
    <a href="categories.html">Categories</a>
    <a href="cart.html">Cart</a>
    <a href="login.html">Login</a>
  </nav>
</header>

<!-- PRODUCTS SECTION -->
<section class="products-page">
  <h2 id="categoryTitle">Products</h2>

  <div class="product-grid" id="productGrid">
    <!-- Products will load here -->
  </div>
</section>

<!-- DATA FILE -->
<script src="data.js"></script>

<!-- CART + PRODUCT LOGIC -->
<script>
  // Get category from URL
  const params = new URLSearchParams(window.location.search);
  const category = params.get("category");

  const title = document.getElementById("categoryTitle");
  const grid = document.getElementById("productGrid");

  if (category) {
    title.innerText = category;
  }

  // Filter products
  const filteredProducts = category
    ? products.filter(p => p.category === category)
    : products;

  // Render products
  filteredProducts.forEach(item => {
    const card = document.createElement("div");
    card.className = "product-card";

    card.innerHTML = `
      <img src="${item.image}" alt="${item.name}">
      <h3>${item.name}</h3>
      <p class="price">â‚¹${item.price}</p>
      <button onclick="addToCart('${item.name}', ${item.price}, '${item.image}')">
        Add to Cart
      </button>
    `;

    grid.appendChild(card);
  });

  // Add to cart function
  function addToCart(name, price, image) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  const existing = cart.find(item => item.name === name);

  if (existing) {
    existing.qty += 1;
  } else {
    cart.push({
      name: name,
      price: price,
      image: image,
      qty: 1
    });
  }

  localStorage.setItem("cart", JSON.stringify(cart));
  alert(name + " added to cart");
}

</script>

</body>
</html>
